
   {% extends 'parcel_backends/base.html' %}
    {% block content %}
        {% load static %}
        <link rel="stylesheet" href="{% static 'parcel_admin.css' %}" />

        <div id="super_alert" class="alert alert-success alert-dismissible" role="alert">
            <p id="alert_mess">{{success}}</p> 
            <button role="alert" type="button"  class="close" data-dismiss="alert"><span>&times;</span></button>
        </div>
        <div id="blank_alert" class="alert alert-danger alert-dismissible" role="alert">
            <p id="blank_mess">{{blank}}</p> 
            <p id="exists">{{exists}}</p> 
            <button role="alert" type="button"  class="close" data-dismiss="alert"><span>&times;</span></button>
        </div>
            <form method="POST" class="container" enctype="multipart/form-data" action="/parcel_backends/reg_staff/">
                {% csrf_token %}
                <legend>Admin Staff Registration Form</legend> <br/>
                <div class="horizontal-form">
                    <div class="photo-input-container" id="photo-input-container">
                        <div class="photo-label">
                            <label for="photo">Upload Photo</label>
                            <input name="photo" type="file" id="photo-upload"/>
                        </div>
                        <div class="photo-img" id="photo-img">
                            
                        </div>
                    </div>
                    <hr/>
                    <div class="form-group">
                        <input name="first_name" placeholder="First Name" for="first_name" type="text" class="form-control"/>
                    </div>
                    <div class="form-group">
                        <input name="last_name" placeholder="Last Name" for="last_name" type="text" class="form-control"/>
                    </div>
                    <div class="form-group">
                        <input name="phone" placeholder="Phone Number" for="phone" type="text" class="form-control"/>
                    </div>
                    <div class="form-group">
                        <input name="email" placeholder="Enter Email" for="email" type="text" class="form-control"/>
                    </div>
                    <div class="form-group">
                        <input id="pass" name="password" placeholder="Enter Password" for="password" type="password" class="form-control"/>
                    </div>
                    <div class="form-group">
                        <input id="retypePass" name="retype_password" placeholder="Retype Password" for="retype_password" type="password" class="form-control"/>
                    </div>
                    <input id="submitForm" type="submit" class="btn default-submit-btn" value="Submit"/> <hr/>
                <a href="{% url 'staff_login' %}">Login Instead</a>  
                </div>
            </form>

            <script>
                if (!$('#alert_mess').html()) {
                    $('#super_alert').hide();
                } else {
                    $('#super_alert').show();
                }
                if (!$('#blank_mess').html() && !$('#exists').html()) {
                    $('#blank_alert').hide();
                    if($('#exists').html()) {
                        $('#blank_mess').hide();
                    }
                } else {
                    $('#blank_alert').show();
                }
                
                document.title = "Staff Registration Page";
                
                // document.form.addEventListener('submit', (e) => {
                //     e.preventDefault();
                //     const pass = $('#pass').val();
                //     const retypePass = $('#retypePass').val();

                //     if(pass !== retypePass) {
                //         return alert('Password doesn\'t match');
                //     }
                // });
                $('#photo-upload').change( async (e)=> {
                    document.getElementById('photo-img').innerHTML = '<img src="" id="staff-img" alt="staff-img"/>';
                    document.getElementById('photo-input-container').style.height = "125px";
                    let tmp_path = await URL.createObjectURL(e.target.files[0]);
                    $("#staff-img").fadeIn("slow").attr('src', tmp_path);
                    // console.log(tmp_path);
                });
                    if($('#photo-img').html(null)) {
                        document.getElementById('photo-input-container').style.height = "70px"; 
                    }

            </script>
{% endblock %}